<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>StatesAirline</title>
  <meta name="description" content="Part 1: í•­ê³µê¶Œ ëª©ë¡ í•„í„°ë§">
  
  <meta name="author" content="ìœ¤ì¢…í˜‘">
  <meta name="copyright" content="&copy; ìœ¤ì¢…í˜‘ 2023">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  

  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/javascript/2023/02/05/states-airline.html">
	<link rel="alternate" type="application/rss+xml" title="HTIL" href="http://localhost:4000/feed.xml" />
	
	<!-- Tooltips -->
	<script type="text/javascript">
		window.tooltips = []
	</script>
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/logo.png" alt="HTIL">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
				
	

	

	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container has-cover" style="background-image: url(/assets/instacode.png);">
  <div class="scrim has-cover">
    <header class="post-header">
      <h1 class="title">StatesAirline</h1>
      <p class="info">by <strong>hyobbeee</strong></p>
    </header>
  </div>
</div>

<div class="wrapper">



<section class="post-meta">
  <div class="post-date">February 5, 2023</div>
  <div class="post-categories">
  in 
    
    <a href="/category/JavaScript">Javascript</a>
    
  
  </div>
</section>

<article class="post-content">
  <h1 id="part-1-í•­ê³µê¶Œ-ëª©ë¡-í•„í„°ë§">Part 1: í•­ê³µê¶Œ ëª©ë¡ í•„í„°ë§</h1>

<p><img src="https://user-images.githubusercontent.com/99409757/216825221-d6d2ad9c-56c2-4718-b338-4d037f9c3f75.png" alt="111" /></p>

<p>ì²«ë²ˆì§¸ í…ŒìŠ¤íŠ¸ëŠ” state &amp; propsë¥¼ í™œìš©í•œ useState êµ¬ë¬¸ìœ¼ë¡œ í•´ê²° ê°€ëŠ¥í•˜ê³ ,</p>

<p>ë‘ë²ˆì§¸ í…ŒìŠ¤íŠ¸ëŠ” SideEffect(í•¨ìˆ˜ ë‚´ì—ì„œ ì–´ë–¤ êµ¬í˜„ì´ ì™¸ë¶€í•¨ìˆ˜ì— ì˜í–¥ì„ ë¼ì¹˜ëŠ” ê²½ìš°)ë¥¼ UseEffect êµ¬ë¬¸ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</p>

<h3 id="useeffect-í™œìš©ë²•"><code class="language-plaintext highlighter-rouge">UseEffect</code> í™œìš©ë²•</h3>

<ol>
  <li>
    <p>ë¹ˆë°°ì—´ ë„£ê¸° : <code class="language-plaintext highlighter-rouge">useEffect(í•¨ìˆ˜, [])</code>  â†’ <a href="https://www.notion.so/0130-HTTP-ea6817eca3d34fd3b4572f20b88659cc">CSR</a> ì‚¬ìš©ì‹œ ì‚¬ìš©</p>

    <p>ì´ ê²½ìš°ì—ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ìƒì„±ë  ë–„ë§Œ effect í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤. â†’ ì»´í¬ë„ŒíŠ¸ ìƒì„±ì‹œ 1íšŒ ì‹¤í–‰</p>

    <ul>
      <li>
        <p>í•„ìš”í•œ ê²½ìš°</p>

        <p>ëŒ€í‘œì ìœ¼ë¡œ ì²˜ìŒ ë‹¨ í•œ ë²ˆ, ì™¸ë¶€ APIë¥¼ í†µí•´ ë¦¬ì†ŒìŠ¤ë¥¼ ë°›ì•„ì˜¤ê³  ë”ì´ìƒ API í˜¸ì¶œì´ í•„ìš”í•˜ì§€ ì•Šì„ ë•Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤. â†’ AJAX(SPA ë°©ì‹) ì‚¬ìš©ì‹œì— ì ìš© ê°€ëŠ¥</p>
      </li>
    </ul>
  </li>
  <li>
    <p>ì•„ë¬´ê²ƒë„ ë„£ì§€ ì•Šê¸° (ê¸°ë³¸ í˜•íƒœ) : <code class="language-plaintext highlighter-rouge">useEffect(í•¨ìˆ˜)</code> â†’ SSR ì‚¬ìš©ì‹œ ì‚¬ìš©</p>

    <p>ê¸°ë³¸ í˜•íƒœì˜ useEffectëŠ” stateê°€ ì—…ë°ì´íŠ¸ ë  ë•Œë§ˆë‹¤ ì‹¤í–‰ëœë‹¤. â†’ ë‹¤ì¤‘ ì‹¤í–‰</p>
  </li>
</ol>

<p>(ì—¬ê¸°ì„œ ajaxê°€ ê¸°ì–µì´ ì˜ ì•ˆë‚˜ì„œ ë‹¤ì‹œ ì •ë¦¬)</p>

<h3 id="ajax">ğŸš¨Â ajax</h3>

<p>ajaxì˜ ê°€ì¥ í° íŠ¹ì§•ì€ ì›¹í˜ì´ì§€ì— í•„ìš”í•œ ë¶€ë¶„ì— í•„ìš”í•œ ë°ì´í„°ë§Œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë°›ì•„ì™€ í™”ë©´ì— ê·¸ë ¤ë‚¼ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.</p>

<p>ë¸Œë¼ìš°ì €ëŠ” Fetchê°€ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê³  ì‘ë‹µì„ ë°›ì„ë•Œê¹Œì§€ ëª¨ë“  ë™ì‘ì„ ë©ˆì¶”ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ê³„ì†í•´ì„œ í˜ì´ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ ì¤€ë‹¤.</p>

<hr />

<h2 id="ï¸mainjs">âœ”ï¸Main.js</h2>

<p>ë©”ì¸ (ë¶€ëª¨ì»´í¬ë„ŒíŠ¸)ì— ìˆëŠ” searchí•¨ìˆ˜ê°€search ì»´í¬ë„ŒíŠ¸ (ìì‹ì»´í¬ë„ŒíŠ¸)ì˜ ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ì‹œ ì‹¤í–‰ë˜ì–´ì•¼ í•œë‹¤ - ìƒíƒœëŒì–´ì˜¬ë¦¬ê¸°ë¥¼ ì‚¬ìš©í•˜ì</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Head</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">next/head</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">getFlight</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../api/FlightDataApi</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">FlightList</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./component/FlightList</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">LoadingIndicator</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./component/LoadingIndicator</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Search</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./component/Search</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Debug</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./component/Debug</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// í›„ë°˜ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ë•Œ ì•„ë˜ importë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.</span>
<span class="c1">// fligthListì—ì„œ jsonìœ¼ë¡œ import í–ˆë˜ê²ƒì„ ì£¼ì„ì²˜ë¦¬ í–ˆëŠ”ë°ë„ ë™ì‘í•´ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ í†µê³¼ê°€ ì•ˆëì—ˆë‹¤.</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// í•­ê³µí¸ ê²€ìƒ‰ ì¡°ê±´ì„ ë‹´ê³  ìˆëŠ” ìƒíƒœ (conditionì€ ìƒíƒœ ë³€ìˆ˜ì´ë‹¤)</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">condition</span><span class="p">,</span> <span class="nx">setCondition</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">({</span>
    <span class="na">departure</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ICN</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">});</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">flightList</span><span class="p">,</span> <span class="nx">setFlightList</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span> <span class="c1">// useState(json)ì€ ì´ˆê¸°ê°’ì¼ ë¿ì´ë‹¤. </span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span> <span class="nx">setIsLoading</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span> <span class="c1">// ë¡œë”© ìƒíƒœ ì„¤ì •, ì´ˆê¸°ê°’ì€ false (isLoading = false -&gt; ì´ˆê¸°ì—ëŠ” ë¡œë”©ì¤‘ì´ ì•ŠìŒ)</span>

  <span class="c1">// ì£¼ì–´ì§„ ê²€ìƒ‰ í‚¤ì›Œë“œì— ë”°ë¼ condition ìƒíƒœë¥¼ ë³€ê²½ì‹œì¼œì£¼ëŠ” í•¨ìˆ˜</span>
  <span class="kd">const</span> <span class="nx">search</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">departure</span><span class="p">,</span> <span class="nx">destination</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span>
      <span class="nx">condition</span><span class="p">.</span><span class="nx">departure</span> <span class="o">!==</span> <span class="nx">departure</span> <span class="o">||</span> 
      <span class="nx">condition</span><span class="p">.</span><span class="nx">destination</span> <span class="o">!==</span> <span class="nx">destination</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="c1">// TODO: search í•¨ìˆ˜ê°€ ì „ë‹¬ ë°›ì•„ì˜¨ 'í•­ê³µí¸ ê²€ìƒ‰ ì¡°ê±´' ì¸ìë¥¼ condition ìƒíƒœì— ì ì ˆí•˜ê²Œ ë‹´ì•„ë³´ì„¸ìš”.</span>
      <span class="nx">setCondition</span><span class="p">({</span><span class="nx">departure</span><span class="p">,</span> <span class="nx">destination</span><span class="p">});</span> <span class="c1">// ìƒíƒœë¥¼ ë³€ê²½ì‹œì¼œì•¼ í•˜ë¯€ë¡œ searchì˜ ì¸ìë¥¼ ë°›ì•„ conditionì„ ë³€ê²½ì‹œí‚¨ë‹¤.</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="c1">// TODO: Effeck Hookì„ ì´ìš©í•´ AJAX ìš”ì²­ì„ ë³´ë‚´ë³´ì„¸ìš”.</span>
  <span class="c1">// TODO: ë”ë¶ˆì–´, ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ ì§„í–‰ë¨ì„ ë³´ì—¬ì£¼ëŠ” ë¡œë”© ì»´í¬ë„ŒíŠ¸(&lt;LoadingIndicator/&gt;)ë¥¼ ì œê³µí•´ë³´ì„¸ìš”ì œ</span>
  <span class="c1">// useEffectë¡œ ìƒíƒœë¥¼ ë³€í™”í•˜ëŠ” conditionì„ FlightDataApiì˜ getflightë¡œ ë„˜ê²¨ì¤€ë‹¤</span>

  <span class="c1">// useEffect(async() =&gt; {</span>
  <span class="c1">//   setIsLoading(true);</span>
  <span class="c1">//   setFlightList(await getFlight(condition));</span>
  <span class="c1">//   setIsLoading(false);</span>
  <span class="c1">// }, [condition])</span>
  <span class="c1">// ê²€ìƒ‰ ì¡°ê±´ì´ ë°”ë€” ë•Œë§ˆë‹¤ useEffect ì‹¤í–‰</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="c1">// ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•œ ê°’(node.js í™˜ê²½)ìœ¼ë¡œ ë‚´ë¶€ ìƒíƒœê°’(react í™˜ê²½)ì„ ë³€ê²½ì‹œì¼œì•¼ í•˜ë‹ˆ side effectë¡œ ë³¼ ìˆ˜ ìˆë‹¤. (ë¡œì»¬ í•¨ìˆ˜ì˜ ì œê³µê°’ì„ ì´ìš©í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ì„œë²„ì˜ ë°ì´í„°ë¥¼ ì´ìš©í•¨) side effectëŠ” effect hookìœ¼ë¡œ ì²˜ë¦¬</span>
    <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span> <span class="c1">// useEffectê°€ í˜¸ì¶œë˜ë©´ ë°ì´í„°ë¥¼ ë°›ì•„ì™€ì•¼ í•˜ë‹ˆ false ì˜€ë˜ isLoading ìƒíƒœë¥¼ trueë¡œ ë³€ê²½ì‹œì¼œì¤€ë‹¤.</span>
    <span class="nx">getFlight</span><span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="c1">// importí•œ getFlightì—ì„œ condition ê°ì²´ë¡œ í•„í„°ë§ì„ ì§„í–‰í•˜ì—¬ ë°ì´í„°ë¥¼ ì¶”ì¶œí•œ í›„</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">filtered</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="c1">// ê·¸ ë°ì´í„°(departure, destination)ë¥¼ ì´ìš©í•´ FlightListì™€ isLoadingì˜ ìƒíƒœë¥¼ ë³€ê²½ì‹œì¼œì¤€ë‹¤.</span>
      <span class="nx">setFlightList</span><span class="p">(</span><span class="nx">filtered</span><span class="p">);</span> <span class="c1">// flightListì—ëŠ” ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ ë„˜ê²¨ì£¼ì–´ ìƒíƒœë¥¼ ë³€ê²½ì‹œì¼œì£¼ê³ </span>
      <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span> <span class="c1">// ë°ì´í„°ë¥¼ ë°›ì•„ì™”ìœ¼ë‹ˆ ë¡œë”©í™”ë©´ë„ ì¢…ë£Œì‹œì¼œì¤€ë‹¤.</span>
    <span class="p">});</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">condition</span><span class="p">]);</span> <span class="c1">// useEffectì˜ ë‘ë²ˆì§¸ ì¸ì [condition]ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì•ì˜ ì½œë°± í•¨ìˆ˜ê°€ ì‹¤í–‰ë¨. ([]ëŠ” ì»´í¬ë„ŒíŠ¸ ìƒì„±ì‹œì—ë§Œ ì‹¤í–‰ë¨)</span>

  <span class="c1">// ì´ì „ì— ì‚¬ìš©í•œ í•„í„° í•¨ìˆ˜ ì‚­ì œ</span>
  <span class="c1">// const filterByCondition = (flight) =&gt; {</span>
  <span class="c1">//   let pass = true;</span>
  <span class="c1">//   if (condition.departure) {</span>
  <span class="c1">//     pass = pass &amp;&amp; flight.departure === condition.departure;</span>
  <span class="c1">//   }</span>
  <span class="c1">//   if (condition.destination) {</span>
  <span class="c1">//     pass = pass &amp;&amp; flight.destination === condition.destination;</span>
  <span class="c1">//   }</span>
  <span class="c1">//   return pass;</span>
  <span class="c1">// };</span>

  <span class="nb">global</span><span class="p">.</span><span class="nx">search</span> <span class="o">=</span> <span class="nx">search</span><span class="p">;</span> <span class="c1">// í…ŒìŠ¤íŠ¸ ì½”ë“œ</span>

  <span class="c1">// TODO: í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì˜ ì§€ì‹œì— ë”°ë¼ search í•¨ìˆ˜ë¥¼ Search ì»´í¬ë„ŒíŠ¸ë¡œ ë‚´ë ¤ì£¼ì„¸ìš”.</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">Head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>States Airline<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="p">=</span><span class="s">"icon"</span> <span class="na">href</span><span class="p">=</span><span class="s">"/favicon.ico"</span> <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nc">Head</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">main</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>ì—¬í–‰ê°€ê³  ì‹¶ì„ ë•, States Airline<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Search</span> <span class="na">onSearch</span><span class="p">=</span><span class="si">{</span><span class="nx">search</span><span class="si">}</span> <span class="p">/&gt;</span> 
        <span class="si">{</span><span class="cm">/* Search ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ìƒíƒœë³€ê²½ í•¨ìˆ˜ì¸ searchë¥¼ onSearch propsë¡œ ì „ë‹¬ ë˜ì–´ì•¼ í•œë‹¤. */</span><span class="si">}</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"table"</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"row-header"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"col"</span><span class="p">&gt;</span>ì¶œë°œ<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"col"</span><span class="p">&gt;</span>ë„ì°©<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"col"</span><span class="p">&gt;</span>ì¶œë°œ ì‹œê°<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"col"</span><span class="p">&gt;</span>ë„ì°© ì‹œê°<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"col"</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="si">{</span><span class="cm">/* &lt;FlightList list={flightList.filter(filterByCondition)} /&gt; */</span><span class="si">}</span>
          <span class="si">{</span><span class="nx">isLoading</span> <span class="p">?</span> <span class="p">&lt;</span><span class="nc">LoadingIndicator</span> <span class="p">/&gt;</span> <span class="p">:</span> <span class="p">&lt;</span><span class="nc">FlightList</span> <span class="na">list</span><span class="p">=</span><span class="si">{</span><span class="nx">flightList</span><span class="si">}</span> <span class="p">/&gt;</span><span class="si">}</span> 
          <span class="si">{</span><span class="cm">/* ë¡œë”© ì¤‘ì´ë©´ LoadingIndicator, ì•„ë‹ˆë©´ FlightListì˜ list í•­ëª© ì¶”ì¶œ */</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"debug-area"</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nc">Debug</span> <span class="na">condition</span><span class="p">=</span><span class="si">{</span><span class="nx">condition</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">img</span> <span class="na">id</span><span class="p">=</span><span class="s">"logo"</span> <span class="na">alt</span><span class="p">=</span><span class="s">"logo"</span> <span class="na">src</span><span class="p">=</span><span class="s">"codestates-logo.png"</span> <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="ï¸searchjs">âœ”ï¸Search.js</h2>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">Search</span><span class="p">({</span><span class="nx">onSearch</span><span class="p">})</span> <span class="p">{</span> <span class="c1">// ìƒíƒœë³€ê²½ í•¨ìˆ˜ 'search'ê°€ 'onSearch' propsë¡œ ì „ë‹¬ë˜ì–´ì•¼ í•œë‹¤. í•¨ìˆ˜ë¡œ ë°›ê¸°ë•Œë¬¸ì— { }ë¥¼ ì ì–´ì¤˜ì•¼í•œë‹¤.</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">textDestination</span><span class="p">,</span> <span class="nx">setTextDestination</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">handleChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="c1">// ë°›ì•„ì˜¨ ì¸ìê°’ ëŒ€ë¬¸ìë¡œ ë§Œë“¦</span>
    <span class="nx">setTextDestination</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">());</span>
  <span class="p">};</span>

  <span class="kd">const</span> <span class="nx">handleKeyPress</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="c1">// ì—”í„° ë²„íŠ¼ì´ ëˆŒë ¸ëŠ”ì§€ ê°ì§€í•˜ëŠ” ì´ë²¤íŠ¸</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">keypress</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">code</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">Enter</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// í‚¤ê°€ ëˆŒë ¸ê³ , ê·¸ê²Œ Enterë¼ë©´ ì•„ë˜ í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚´</span>
      <span class="nx">handleSearchClick</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="kd">const</span> <span class="nx">handleSearchClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">departure</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">ICN</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">destination</span> <span class="o">=</span> <span class="nx">textDestination</span> <span class="o">===</span> <span class="dl">""</span> <span class="p">?</span> <span class="kc">null</span> <span class="p">:</span> <span class="nx">textDestination</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ê²€ìƒ‰ ë²„íŠ¼ì„ ëˆ„ë¥´ê±°ë‚˜, ì—”í„°ë¥¼ ì¹˜ë©´ search í•¨ìˆ˜ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤</span><span class="dl">'</span><span class="p">);</span>
    <span class="c1">// TODO: ì§€ì‹œì— ë”°ë¼ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ propsë¥¼ ë°›ì•„ì„œ ì‹¤í–‰ì‹œì¼œ ë³´ì„¸ìš”.</span>
    <span class="c1">// searchëŠ” setCondition({departure, destination})ì„ ì‹¤í–‰</span>
    <span class="c1">// ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ì‹œ -&gt; onClick -&gt; {handleSearchClick}</span>
    <span class="nx">onSearch</span><span class="p">({</span><span class="nx">departure</span><span class="p">,</span> <span class="nx">destination</span><span class="p">});</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">fieldset</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">legend</span><span class="p">&gt;</span>ê³µí•­ ì½”ë“œë¥¼ ì…ë ¥í•˜ê³ , ê²€ìƒ‰í•˜ì„¸ìš”<span class="p">&lt;/</span><span class="nt">legend</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>ì¶œë°œì§€<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="p">=</span><span class="s">"input-departure"</span> <span class="na">type</span><span class="p">=</span><span class="s">"text"</span> <span class="na">disabled</span> <span class="na">value</span><span class="p">=</span><span class="s">"ICN"</span><span class="p">&gt;&lt;/</span><span class="nt">input</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>ë„ì°©ì§€<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> <span class="si">{</span><span class="cm">/* ë„ì°©ì§€ ì…ë ¥ì¹¸ -&gt; ì´ë²¤íŠ¸ í•¨ìˆ˜ 3ê°€ì§€ ( handleSearchClick, handleChange, handleKeyPress) */</span><span class="si">}</span>
      <span class="p">&lt;</span><span class="nt">input</span>
        <span class="na">id</span><span class="p">=</span><span class="s">"input-destination"</span>
        <span class="na">type</span><span class="p">=</span><span class="s">"text"</span>
        <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="nx">textDestination</span><span class="si">}</span>
        <span class="na">onChange</span><span class="p">=</span><span class="si">{</span><span class="nx">handleChange</span><span class="si">}</span>
        <span class="na">placeholder</span><span class="p">=</span><span class="s">"CJU, BKK, PUS ì¤‘ í•˜ë‚˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”"</span>
        <span class="na">onKeyPress</span><span class="p">=</span><span class="si">{</span><span class="nx">handleKeyPress</span><span class="si">}</span>
      <span class="p">/&gt;</span> 
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="p">=</span><span class="s">"search-btn"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">handleSearchClick</span><span class="si">}</span><span class="p">&gt;</span>
        ê²€ìƒ‰
      <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Search</span><span class="p">;</span>
</code></pre></div></div>

<h1 id="part-2-ajax-ìš”ì²­">Part 2: AJAX ìš”ì²­</h1>

<h2 id="ï¸flightdataapijs">âœ”ï¸FlightDataApi.js</h2>

<p>FlightDataApiì—ì„œ ê¸°ì¡´ êµ¬í˜„ ëŒ€ì‹ , REST APIë¥¼ í˜¸ì¶œí•˜ë„ë¡ ë°”ê¿‰ë‹ˆë‹¤</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">flightList</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../resource/flightList</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">fetch</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">node-fetch</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// if (typeof window !== 'undefined') {</span>
<span class="c1">//   localStorage.setItem('flight', JSON.stringify(flightList));</span>
<span class="c1">// }</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">getFlight</span><span class="p">(</span><span class="nx">filterBy</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
  <span class="c1">// HINT: ê°€ì¥ ë§ˆì§€ë§‰ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ê¸° ìœ„í•´, fetchë¥¼ ì´ìš©í•©ë‹ˆë‹¤. ì•„ë˜ êµ¬í˜„ì€ ì™„ì „íˆ ì‚­ì œë˜ì–´ë„ ìƒê´€ì—†ìŠµë‹ˆë‹¤.</span>
  <span class="c1">// TODO: ì•„ë˜ êµ¬í˜„ì„ REST API í˜¸ì¶œë¡œ ëŒ€ì²´í•˜ì„¸ìš”.</span>

  <span class="kd">let</span> <span class="nx">queryString</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span> <span class="c1">// queryString ë³€ìˆ˜ ì„ ì–¸</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">filterBy</span><span class="p">.</span><span class="nx">departure</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// filterBy.departureê°€ í˜¸ì¶œë˜ë©´ ì¦‰ exportí•œ getFligthì´ í˜¸ì¶œë˜ë©´ (Main ì»´í¬ë„ŒíŠ¸ ì°¸ê³  -- getFlight(condition))</span>
    <span class="nx">queryString</span> <span class="o">=</span> <span class="nx">queryString</span> <span class="o">+</span> <span class="s2">`departure=</span><span class="p">${</span><span class="nx">filterBy</span><span class="p">.</span><span class="nx">departure</span><span class="p">}</span><span class="s2">&amp;`</span> <span class="c1">// queryString ì— í•„í„°ë§ ëœ departureë¥¼ jsoní™” ì‹œì¼œì„œ ì €ì¥</span>
  <span class="p">}</span> 
  <span class="k">if</span> <span class="p">(</span><span class="nx">filterBy</span><span class="p">.</span><span class="nx">destination</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// filterBy.destinationì´ í˜¸ì¶œë˜ë©´ ì¦‰ exportí•œ getFlightì´ í˜¸ì¶œë˜ë©´ (Main ì»´í¬ë„ŒíŠ¸ ì°¸ê³  -- getFlight(condition))</span>
    <span class="nx">queryString</span> <span class="o">=</span> <span class="nx">queryString</span> <span class="o">+</span> <span class="s2">`destination=</span><span class="p">${</span><span class="nx">filterBy</span><span class="p">.</span><span class="nx">destination</span><span class="p">}</span><span class="s2">`</span> <span class="c1">// queryStringì— í•„í„°ë§ëœ destinationë„ jsoní™” ì‹œì¼œ ì €ì¥</span>
  <span class="p">}</span>
  <span class="kd">let</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="s2">`http://ec2-13-124-90-231.ap-northeast-2.compute.amazonaws.com:81/flight?</span><span class="p">${</span><span class="nx">queryString</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span> <span class="c1">// í•„í„°ë§ëœ departureì™€ destinationì˜ ê°’ì„ ë‹´ì€ queryStringì„ ëª…ì‹œí•œ url ì„¤ì •</span>

  <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">)</span>  <span class="c1">// urlì„ ì„œë²„ì— ìš”ì²­í•œë‹¤.</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span> <span class="c1">// ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ jsoní™” ì‹œì¼œ ì €ì¥í•œë‹¤.</span>

<span class="cm">/* ì§€ì—° ìš”ì²­ í…ŒìŠ¤íŠ¸ìš© ì½”ë“œ
  let json = [];
  if (typeof window !== 'undefined') {
    json = localStorage.getItem('flight');
  }
  const flight = JSON.parse(json) || [];

  return new Promise((resolve) =&gt; {
    const filtered = flight.filter((flight) =&gt; {
      let condition = true;
      if (filterBy.departure) {
        condition = condition &amp;&amp; flight.departure === filterBy.departure;
      }
      if (filterBy.destination) {
        condition = condition &amp;&amp; flight.destination === filterBy.destination;
      }
      return condition;
    });

    setTimeout(() =&gt; {
      resolve(filtered);
    }, 500);
  });
}
*/</span>
<span class="p">}</span>
</code></pre></div></div>

</article>



<section class="tags">
  <strong>Tags:</strong> <a href="/tag/TIL">TIL</a>,&nbsp;<a href="/tag/JavaScript">JavaScript</a>
</section>



<section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
</section>

<section class="share">
  <span>Share: </span>
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
</section>




</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">HTIL</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
				
	

	

	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:yjh5799@naver.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">yjh5799@naver.com</span>
          </a>
        </li>

        
          
          <li>
            <a href="https://github.com/hyobbeee" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">hyobbeee</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://www.instagram.com/creamizzang/" title="Follow me on Instagram">
              <i class="fa fa-instagram"></i>
              <span class="username">creamizzang</span>
            </a>
          </li>
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">hyobbeee.github.io
</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"></script>
<script src="//unpkg.com/popper.js@1"></script>
<script src="//unpkg.com/tippy.js@5"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });

	// Enable tooltips via Tippy.js
	if (Array.isArray(window.tooltips)) {
		window.tooltips.forEach(function(tooltip) {
			var selector = tooltip[0];
			var config = tooltip[1];
			tippy(selector, config);
		})
	}
});

</script>






  </body>

</html>
